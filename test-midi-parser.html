<!DOCTYPE html>
<html>
<head>
    <title>MIDI Parser Test</title>
</head>
<body>
    <h1>MIDI Parser Test</h1>
    <input type="file" id="midi-input" accept=".mid,.midi">
    <button onclick="testParser()">Test Parser</button>
    <div id="output"></div>

    <script src="js/midi-parser.js"></script>
    <script>
        function testParser() {
            const input = document.getElementById('midi-input');
            const file = input.files[0];
            
            if (!file) {
                alert('Please select a MIDI file');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const parser = new MidiParser();
                    const midiData = parser.parse(e.target.result);
                    const patterns = parser.convertToPatterns();
                    
                    document.getElementById('output').innerHTML = `
                        <h3>MIDI Data:</h3>
                        <pre>${JSON.stringify(midiData, null, 2)}</pre>
                        <h3>Beat Pattern:</h3>
                        <pre>${JSON.stringify(patterns.beatPattern, null, 2)}</pre>
                        <h3>Melody Pattern:</h3>
                        <pre>${JSON.stringify(patterns.melodyPattern, null, 2)}</pre>
                        <h3>Tempo:</h3>
                        <p>${patterns.tempo} BPM</p>
                    `;
                } catch (error) {
                    document.getElementById('output').innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
                }
            };
            reader.readAsArrayBuffer(file);
        }
    </script>
</body>
</html>